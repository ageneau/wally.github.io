{"version":3,"sources":["wally/views.cljs"],"mappings":"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","names":["wally.views/home-title","name","G__49582","re-frame.core/subscribe","re-com.core/title","wally.views/link-to-about-page","re-com.core/hyperlink-href","wally.views/networks","wally.views/valid-dest?","cljs-web3.core/address?","wally.views/valid-amount?","cljs.core/pos?","wally.views/valid-duration?","wally.views/valid-form?","form","and__4174__auto__","G__49585","G__49588","G__49589","wally.views/recipient-input","cljs.core/deref","p1__49590#","dest","G__49591","status","re-com.core/input-text","G__49592","re-frame.core/dispatch","wally.views/amount-input","p1__49593#","amount","G__49594","G__49595","wally.views/duration-input","p1__49596#","duration","G__49597","G__49598","wally.views/send-button","G__49599","valid?","re-com.core/button","cljs.core/not","G__49600","wally.views/account-label","accounts","G__49601","account","cljs.core/first","balance","G__49602","token-balance","G__49603","re-com.core/v-box","G__49604","G__49605","re-com.core/label","G__49606","G__49607","cljs_web3.core.from_wei.cljs$core$IFn$_invoke$arity$2","wally.views/home-panel","G__49608","re-com.core/h-box","wally.views/about-title","wally.views/link-to-home-page","wally.views/about-panel","wally.views/panels","panel-name","G__49609","cljs.core/Keyword","wally.views/show-panel","wally.views/main-panel","active-panel","G__49610"],"sourcesContent":["(ns wally.views\n  (:require\n   [re-frame.core :as re-frame]\n   [re-com.core :as re-com]\n   [wally.subs :as subs]\n   [cljs-web3.core :as web3]))\n\n\n;; home\n\n(defn home-title []\n  (let [name (re-frame/subscribe [::subs/name])]\n    [re-com/title\n     :label \"Stream DAI tokens over time\"\n     :level :level1]))\n\n(defn link-to-about-page []\n  [re-com/hyperlink-href\n   :label \"go to About Page\"\n   :href \"#/about\"])\n\n(def networks [{:id :main :label \"Main Ethereum Network\"}\n               {:id :ropsten :label \"Ropsten Test Network\"}\n               {:id :rinkeby :label \"Rinkeby Test Network\"}])\n\n\n(def valid-dest? web3/address?)\n(def valid-amount? pos?)\n(def valid-duration? pos?)\n\n(defn valid-form? [form]\n  (and (valid-duration? (:duration form))\n       (valid-amount? (:amount form))\n       (valid-dest? (:dest form))))\n\n\n(defn recipient-input []\n  (let [dest @(re-frame/subscribe [::subs/dest])\n        status (when (valid-dest? dest) :success)]\n    [re-com/input-text\n     :model dest\n     :status status\n     :status-icon? true\n     :status-tooltip \"valid address\"\n     :width \"400px\"\n     :placeholder \"recipient address\"\n     :on-change #(re-frame/dispatch [:dest-changed %])]))\n\n(defn amount-input []\n  (let [amount @(re-frame/subscribe [::subs/amount])\n        status (when (valid-amount? amount) :success)]\n    [re-com/input-text\n     :model amount\n     :status status\n     :status-icon? true\n     :status-tooltip \"valid amount\"\n     :width \"300px\"\n     :placeholder \"Amount to send\"\n     :on-change #(re-frame/dispatch [:amount-changed %])]))\n\n(defn duration-input []\n  (let [duration @(re-frame/subscribe [::subs/duration])\n        status (when (valid-duration? duration) :success)]\n    [re-com/input-text\n     :model duration\n     :status status\n     :status-icon? true\n     :status-tooltip \"valid duration\"\n     :width \"300px\"\n     :placeholder \"Stream duration in minutes\"\n     :on-change #(re-frame/dispatch [:duration-changed %])]))\n\n(defn send-button []\n  (let [form @(re-frame/subscribe [::subs/form])\n        valid? (valid-form? form)]\n    [re-com/button\n     :label \"Stream funds\"\n     :disabled? (not valid?)\n     :style {:color            \"white\"\n             :background-color \"#4d90fe\"}\n     :on-click #(re-frame/dispatch [:submit-clicked])]))\n\n(defn account-label []\n  (let [accounts @(re-frame/subscribe [::subs/accounts])\n        account (first accounts)\n        balance @(re-frame/subscribe [::subs/balance account])\n        token-balance @(re-frame/subscribe [::subs/token-balance account])]\n    [re-com/v-box\n     :children [(re-com/label :label (str \"Account: \" account))\n                (re-com/label :label (str \"Balance: \" (web3/from-wei balance :ether) \" ETH\"))]]))\n\n(defn home-panel []\n  [re-com/v-box\n   :gap \"1em\"\n   :style {:margin \"30px\"}\n   :children [[home-title]\n              [re-com/button\n               :label    [:span \"Connect to MetaMask \" #_[:i {:style {:background-image \"url('https://i.ibb.co/BsTBKsn/fox.png')\"\n                                                                    :background-size \"contain\"\n                                                                    :display \"inline-block\"\n                                                                    :width \"36px\"\n                                                                    :height \"36px\"}}]]\n               :on-click #(re-frame/dispatch [:login/metamask])\n               :style    {:color            \"white\"\n                          :background-color \"#4d90fe\"\n                          ;; :font-size        \"22px\"\n                          ;; :font-weight      \"300\"\n                          ;; :border           \"none\"\n                          ;; :border-radius    \"0px\"\n                          ;; :padding          \"20px 26px\"\n                          }]\n              #_[network-selector]\n              [account-label]\n              [re-com/h-box\n               :gap \"1em\"\n               :children [[recipient-input]\n                          [amount-input]]]\n              [duration-input]\n              [send-button]\n              #_[link-to-about-page]]])\n\n\n;; about\n\n(defn about-title []\n  [re-com/title\n   :label \"This is the About Page.\"\n   :level :level1])\n\n(defn link-to-home-page []\n  [re-com/hyperlink-href\n   :label \"go to Home Page\"\n   :href \"#/\"])\n\n(defn about-panel []\n  [re-com/v-box\n   :gap \"1em\"\n   :children [[about-title]\n              [link-to-home-page]]])\n\n\n;; main\n\n(defn- panels [panel-name]\n  (case panel-name\n    :home-panel [home-panel]\n    :about-panel [about-panel]\n    [:div]))\n\n(defn show-panel [panel-name]\n  [panels panel-name])\n\n(defn main-panel []\n  (let [active-panel (re-frame/subscribe [::subs/active-panel])]\n    [re-com/v-box\n     :height \"100%\"\n     :children [[panels @active-panel]]]))\n"]}